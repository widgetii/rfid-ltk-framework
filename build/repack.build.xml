<?xml version="1.0" encoding="UTF-8"?>

<project
	xmlns:ivy="antlib:org.apache.ivy.ant"
	name="ru.aplix.ltk.build.repack">

	<import file="setup.build.xml"/>

	<property name="ivy.file" value="${basedir}/ivy.xml"/>
	<property 
		name="jar.file"
		value="${target.dir}/${ant.project.name}_${module.version}.jar"/>
	<property name="classes.dir" value="${basedir}/bin"/>

	<ivy:settings file="${root.dir}/ivysettings.xml"/>

	<target name="package">
		<mkdir taskname="${ant.project.name}" dir="${target.dir}"/>
		<jar
			taskname="${ant.project.name}"
			destfile="${jar.file}"
			manifest="META-INF/MANIFEST.MF"
			encoding="UTF-8">
			<ivy:resources file="${ivy.file}" conf="repack" type="jar"/>
		</jar>
	</target>

	<target name="test" depends="package"/>

	<target name="clean" description="Cleans everything">
		<delete taskname="${ant.project.name}" file="${jar.file}"/>
	</target>

</project>
